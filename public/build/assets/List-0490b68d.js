import{r,j as e}from"./app-3d82188f.js";import{S as C,T as l,P as y}from"./Tooltip-78463a86.js";import{S}from"./SpamTypeHelper-95368d74.js";import b from"./Delete-9b3a727d.js";function P(){const[a,x]=r.useState({}),[t,i]=r.useState(1),[h,d]=r.useState(!1),[c,o]=r.useState(null),j=s=>{o(s)},u=()=>{o(null)},f=()=>{n(t)},m=s=>{i(s),a.path&&n(s)},n=s=>{d(!0),axios.post(route("spam.incoming.paginate",s)).then(g=>{x(g.data)}).finally(()=>{d(!1)})},p=s=>new Date(s).toLocaleString();return r.useEffect(()=>n(t),[]),r.useEffect(()=>{},[t]),r.useEffect(()=>{},[a]),e.jsx("div",{className:"p-4 sm:p-8 bg-white shadow sm:rounded-lg",children:h?e.jsxs("div",{className:"text-center",children:[e.jsx(C,{size:"md"})," Загрузка..."]}):e.jsxs(e.Fragment,{children:[c&&e.jsx(b,{closeModal:u,item:c,refresh:f}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"№"}),e.jsx(l.HeadCell,{style:{minWidth:"24rem"},children:"Текст"}),e.jsx(l.HeadCell,{children:"Категория"}),e.jsx(l.HeadCell,{style:{minWidth:"8rem"},children:"Данные с запроса"}),e.jsx(l.HeadCell,{children:"Время"}),e.jsx(l.HeadCell,{children:"Действия"})]}),e.jsx(l.Body,{className:"divide-y",children:(a==null?void 0:a.data)&&a.data.map(s=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:s==null?void 0:s.id}),e.jsx(l.Cell,{className:"break-all",children:(s==null?void 0:s.text.substring(0,250))+"..."}),e.jsx(l.Cell,{children:S.translate(s==null?void 0:s.spam_type)}),e.jsx(l.Cell,{children:s==null?void 0:s.request}),e.jsx(l.Cell,{children:p(s==null?void 0:s.created_at)}),e.jsx(l.Cell,{children:e.jsx("a",{className:"font-medium text-cyan-600 hover:underline dark:text-cyan-500",onClick:()=>j(s),href:"#",children:e.jsx("p",{children:"Удалить"})})})]},s.id))})]})}),e.jsx("div",{className:"flex items-center justify-center text-center",children:(a==null?void 0:a.data)&&(a==null?void 0:a.total)>0&&e.jsx(y,{currentPage:t,onPageChange:m,totalPages:a==null?void 0:a.last_page,nextLabel:"Далее",previousLabel:"Назад"})})]})})}export{P as default};
